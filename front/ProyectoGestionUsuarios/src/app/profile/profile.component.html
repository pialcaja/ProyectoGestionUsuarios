<div class="profile-bg">
  <!-- CARD PERFIL -->
  <div class="profile-card fade-in">
    <!-- PERFIL (LECTURA) -->
    <ng-container *ngIf="perfil(); else cargando">
      <h2>Hola, {{ perfil()?.nombre }} 游녦</h2>
      <p class="subtitle">Informaci칩n de tu perfil</p>
      <div class="profile-info">
        <p><strong>Nombre:</strong> {{ perfil()?.nombre }}</p>
        <p><strong>Apellido paterno:</strong> {{ perfil()?.apepa }}</p>
        <p><strong>Apellido materno:</strong> {{ perfil()?.apema }}</p>
        <p><strong>Email:</strong> {{ perfil()?.email }}</p>
        <p><strong>Fecha de nacimiento:</strong> {{ perfil()?.fecha_nacimiento }}</p>
      </div>
      <div class="actions">
        <button class="btn-primary" *ngIf="!mostrarFormulario()" (click)="mostrarFormActualizar()">
          Actualizar mis datos
        </button>
        <button class="btn-secondary" (click)="logout()">
          Cerrar Sesi칩n
        </button>
      </div>
    </ng-container>
    <!-- CARGANDO -->
    <ng-template #cargando>
      <p class="loading">Cargando perfil...</p>
    </ng-template>
  </div>
  <!-- CARD FORMULARIO -->
  <div class="profile-card fade-in" *ngIf="mostrarFormulario() && perfil()">
    <h3>Actualizar Perfil</h3>
    <form [formGroup]="form" (ngSubmit)="guardar()">
      <div class="form-group">
        <label>Nombre</label>
        <input formControlName="nombre" type="text" />
        <small *ngIf="form.get('nombre')?.errors?.['soloLetras']">
          S칩lo debe contener letras*
        </small>
      </div>
      <div class="form-group">
        <label>Apellido Paterno</label>
        <input formControlName="apepa" type="text" />
        <small *ngIf="form.get('apepa')?.errors?.['soloLetras']">
          S칩lo debe contener letras*
        </small>
      </div>
      <div class="form-group">
        <label>Apellido Materno</label>
        <input formControlName="apema" type="text" />
        <small *ngIf="form.get('apema')?.errors?.['soloLetras']">
          S칩lo debe contener letras*
        </small>
      </div>
      <div class="form-group">
        <label>Email</label>
        <input formControlName="email" type="email" />
        <small *ngIf="form.get('email')?.hasError('pattern')">
          Email inv치lido*
        </small>
      </div>
      <div class="form-group">
        <label>Contrase침a (opcional)</label>
        <input formControlName="pwd" type="password" />
        <small *ngIf="form.get('pwd')?.errors?.['passwordDebil']">
          M칤nimo 7 caracteres, may칰scula, n칰mero y car치cter especial*
        </small>
      </div>
      <div class="form-group">
        <label>Fecha de nacimiento</label>
        <input formControlName="fecha_nacimiento" type="date" />
        <small *ngIf="form.get('fecha_nacimiento')?.errors?.['menorEdad']">
          Debe ser mayor de 18 a침os*
        </small>
        <small *ngIf="form.get('fecha_nacimiento')?.errors?.['mayor100']">
          Edad m치xima permitida: 100 a침os*
        </small>
      </div>
      <div class="actions">
        <button class="btn-primary" type="submit" [disabled]="form.invalid">
          Guardar cambios
        </button>
        <button class="btn-secondary" type="button" (click)="ocultarForm()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>